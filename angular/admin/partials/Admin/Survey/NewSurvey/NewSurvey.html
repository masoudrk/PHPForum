<!-- Content Header (Page header) -->
<section class="content-header">
    <h1 class="content-header vazir-font">
        {{(!editMode)?'ویرایش':'افزودن'}} نظرسنجی
    </h1>

    <ol class="breadcrumb">
        <li><a ui-sref="dashboard"><i class="fa fa-dashboard"></i>خانه</a></li>
        <li class="active">{{(!editMode)?'ویرایش':'افزودن'}} نظرسنجی</li>
    </ol>
</section>

<div class="row">
    <div class="col-xs-12">
        <div class="col-xs-12 col-md-12">
            <div class="box box-success">
                <div class="box-header with-border">
                    <h3 class="box-title vazir-font">متن نظرسنجی</h3>
                    <i class="fa fa-plus fa-2x text-muted"></i>
                </div><!-- /.box-header -->
                <div class="box-body persian-rtl">
                    <div class="row">
                        <div class="form-horizontal form-group col-xs-6">

                            <div class="col-xs-12 col-md-8">
                                <adm-dtp ng-model='ExpireDate'
                                         options='{calType: "jalali",dtpType:"date", format: "YYYY/MM/DD", autoClose:true , default:"today"}'
                                         full-data="survey.toFullEnd" class="english-font"
                                         mindate="{{survey.toFullStart.unix}}"></adm-dtp>
                            </div>
                            <label class="col-md-4 col-xs-12 control-label">پایان نظرسنجی</label>
                        </div>
                        <div class="form-horizontal form-group col-xs-6">

                            <div class="col-xs-12 col-md-8">
                                <adm-dtp ng-model='StartDate'
                                         options='{calType: "jalali",dtpType:"date", format: "YYYY/MM/DD", autoClose:true , default:"today"}'
                                         full-data="survey.toFullStart" class="english-font"
                                         mindate="{{mindate}}"></adm-dtp>
                            </div>
                            <label class="col-md-4 col-xs-12 control-label">شروع نظرسنجی</label>
                        </div>
                        <div class="form-horizontal form-group col-xs-6">

                            <div class="col-xs-12 col-md-8">
                                <input class="form-control" ng-model="survey.Title"
                                       placeholder="عنوان نظرسنجی ... "/>
                            </div>
                            <label class="col-md-4 col-xs-12 control-label">عنوان نظرسنجی</label>
                        </div>
                        <div class="form-horizontal form-group col-xs-6" >

                            <div class="col-xs-12 col-md-8">
                                <input class="form-control" ng-model="survey.Name"
                                       placeholder="کوتاه باشد"/>
                            </div>
                            <label class="col-md-4 col-xs-12 control-label">اسم نظرسنجی</label>
                        </div>

                        <div class="form-horizontal form-group col-xs-6">
                            <div class="col-xs-12 col-md-12">
                                <label compile="surveyType.selected.TypeDescription || pNumber"></label>
                            </div>
                        </div>

                        <div class="form-horizontal form-group col-xs-6" >

                            <div class="col-xs-12 col-md-8">
                                <ui-select ng-model="surveyType.selected" theme="bootstrap" sortable="true" close-on-select="true" style="width: 100%;direction: rtl">
                                    <ui-select-match placeholder="انتخاب نوع نظرسنجی">{{surveyType.selected.SurveyTypeName}}</ui-select-match>
                                    <ui-select-choices repeat="types in SurveyTypes">
                                        <div compile="types.SurveyTypeName "></div>
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                            <label class="col-md-4 col-xs-12 control-label">نوع نظرسنجی</label>
                        </div>
                        <div class="form-horizontal form-group col-xs-3" >
                            <div class="col-xs-12 col-md-12">
                                <button class="btn btn-success btn-sm btn-block" ng-click="addNewOption()">افزودن گزینه</button>
                            </div>
                        </div>
                        <div class="form-horizontal form-group col-xs-9" >
                            <div class="col-xs-12 col-md-12" ng-repeat="item in survey.Options">
                                <label compile="item.SurveyText || pNumber"></label>
                                <span class="link pull-left hvr-grow-rotate" ng-click="removeOption($index)"><i class="fa fa-times fa-2x text-red"></i></span>
                            </div>
                            <div class="col-xs-12 col-md-12">
                                <input class="form-control" ng-model="newOption"
                                       placeholder="گزینه نظرسنجی ... "/>
                            </div>
                        </div>

                        <div class="form-horizontal form-group col-xs-12">
                            <div class="col-xs-12" style="margin-top: 10px">
                                <div text-angular id="body"
                                     class="my-large-area"
                                     ng-model="survey.Description"
                                     placeholder="متن نظرسنجی ... " ng-change="fieldChanged('text',survey.Description)"
                                     ng-model-options="{debounce:100}"></div>
                            </div>
                        </div>
                        <div class="form-group " style="margin-top: 5px">
                            <div class="col-xs-12">
                                <div class="col-xs-12">
                                    <button class="btn btn-success pull-left" type="submit" ng-click="saveSurvey()" >
                                        {{!editMode?'ویرایش':'اضافه'}}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- /.box-body -->
            </div><!-- /.box -->
        </div>
    </div>
</div>
